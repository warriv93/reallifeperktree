{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/madisontaskett/gitRepos/reallifeperktree/pages/auth/credentials.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Router from 'next/router';\nimport Link from 'next/link';\nimport { NextAuth } from 'next-auth/client';\n\nvar _default =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(_default, _React$Component);\n\n  _createClass(_default, null, [{\n    key: \"getInitialProps\",\n    value: function getInitialProps(_ref) {\n      var req;\n      return _regeneratorRuntime.async(function getInitialProps$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              req = _ref.req;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(NextAuth.init({\n                req: req\n              }));\n\n            case 3:\n              _context.t0 = _context.sent;\n              _context.next = 6;\n              return _regeneratorRuntime.awrap(NextAuth.linked({\n                req: req\n              }));\n\n            case 6:\n              _context.t1 = _context.sent;\n              _context.next = 9;\n              return _regeneratorRuntime.awrap(NextAuth.providers({\n                req: req\n              }));\n\n            case 9:\n              _context.t2 = _context.sent;\n              return _context.abrupt(\"return\", {\n                session: _context.t0,\n                linkedAccounts: _context.t1,\n                providers: _context.t2\n              });\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    }\n  }]);\n\n  function _default(props) {\n    var _this;\n\n    _classCallCheck(this, _default);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(_default).call(this, props));\n    _this.state = {\n      email: '',\n      password: '',\n      session: _this.props.session\n    };\n    _this.handleEmailChange = _this.handleEmailChange.bind(_assertThisInitialized(_this));\n    _this.handlePasswordChange = _this.handlePasswordChange.bind(_assertThisInitialized(_this));\n    _this.handleSignInSubmit = _this.handleSignInSubmit.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(_default, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      return _regeneratorRuntime.async(function componentDidMount$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (this.props.session.user) {\n                Router.push(\"/auth/\");\n              }\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"handleEmailChange\",\n    value: function handleEmailChange(event) {\n      this.setState({\n        email: event.target.value\n      });\n    }\n  }, {\n    key: \"handlePasswordChange\",\n    value: function handlePasswordChange(event) {\n      this.setState({\n        password: event.target.value\n      });\n    }\n  }, {\n    key: \"handleSignInSubmit\",\n    value: function handleSignInSubmit(event) {\n      event.preventDefault(); // An object passed NextAuth.signin will be passed to your signin() function\n\n      NextAuth.signin({\n        email: this.state.email,\n        password: this.state.password\n      }).then(function (authenticated) {\n        Router.push(\"/auth/callback\");\n      })[\"catch\"](function () {\n        alert(\"Authentication failed.\");\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.props.session.user) {\n        return null;\n      } else {\n        return __jsx(\"div\", {\n          className: \"container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }, __jsx(\"div\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68\n          },\n          __self: this\n        }, __jsx(\"h1\", {\n          className: \"display-5 mt-4 mb-2\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }, \"NextAuth - Custom Sign In\")), __jsx(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }, __jsx(\"div\", {\n          className: \"col-sm-12 col-md-10 col-lg-8 col-xl-7 mr-auto ml-auto\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, __jsx(\"p\", {\n          className: \"mt-3 mb-4 text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, \"If you want to support password based sign in, two factor authentication or another sign in method, define a signin() function in \", __jsx(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, \"next-auth.functions.js\"), \".\"), __jsx(\"div\", {\n          className: \"card mt-3 mb-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, __jsx(\"h4\", {\n          className: \"card-header\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, \"Sign In\"), __jsx(\"div\", {\n          className: \"card-body pb-0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, __jsx(\"form\", {\n          id: \"signin\",\n          method: \"post\",\n          action: \"/auth/signin\",\n          onSubmit: this.handleSignInSubmit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, __jsx(\"input\", {\n          name: \"_csrf\",\n          type: \"hidden\",\n          value: this.state.session.csrfToken,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }), __jsx(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, __jsx(\"label\", {\n          htmlFor: \"email\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, \"Email address\"), __jsx(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }), __jsx(\"input\", {\n          name: \"email\",\n          type: \"text\",\n          placeholder: \"j.smith@example.com\",\n          id: \"email\",\n          className: \"form-control\",\n          value: this.state.email,\n          onChange: this.handleEmailChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        })), __jsx(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, __jsx(\"label\", {\n          htmlFor: \"password\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, \"Password\"), __jsx(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }), __jsx(\"input\", {\n          name: \"password\",\n          type: \"password\",\n          placeholder: \"\",\n          id: \"password\",\n          className: \"form-control\",\n          value: this.state.password,\n          onChange: this.handlePasswordChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        })), __jsx(\"p\", {\n          className: \"text-right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, __jsx(\"button\", {\n          id: \"submitButton\",\n          type: \"submit\",\n          className: \"btn btn-outline-primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, \"Sign in\"))))), __jsx(\"p\", {\n          className: \"text-italic text-muted text-center small\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, \"For this to work, you will need enable the signin() function in \", __jsx(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, \"next-auth.functions.js\")))), __jsx(\"p\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        }, __jsx(Link, {\n          href: \"/auth\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, __jsx(\"a\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, \"Back\"))));\n      }\n    }\n  }]);\n\n  return _default;\n}(React.Component);\n\nexport { _default as default };","map":{"version":3,"sources":["/Users/madisontaskett/gitRepos/reallifeperktree/pages/auth/credentials.js"],"names":["React","Router","Link","NextAuth","req","init","linked","providers","session","linkedAccounts","props","state","email","password","handleEmailChange","bind","handlePasswordChange","handleSignInSubmit","user","push","event","setState","target","value","preventDefault","signin","then","authenticated","alert","csrfToken","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Router from 'next/router'\nimport Link from 'next/link'\nimport { NextAuth } from 'next-auth/client'\n\nexport default class extends React.Component {\n  \n  static async getInitialProps({req}) {\n    return {\n      session: await NextAuth.init({req}),\n      linkedAccounts: await NextAuth.linked({req}),\n      providers: await NextAuth.providers({req})\n    }\n  }\n  \n  constructor(props) {\n    super(props)\n    this.state = {\n      email: '',\n      password: '',\n      session: this.props.session\n    }\n    this.handleEmailChange = this.handleEmailChange.bind(this)\n    this.handlePasswordChange = this.handlePasswordChange.bind(this)\n    this.handleSignInSubmit = this.handleSignInSubmit.bind(this)\n  }\n\n  async componentDidMount() {\n    if (this.props.session.user) {\n      Router.push(`/auth/`)\n    }\n  }\n\n  handleEmailChange(event) {\n    this.setState({\n      email: event.target.value\n    })\n  }\n\n  handlePasswordChange(event) {\n    this.setState({\n      password: event.target.value\n    })\n  }\n  \n  handleSignInSubmit(event) {\n    event.preventDefault()\n\n    // An object passed NextAuth.signin will be passed to your signin() function\n    NextAuth.signin({\n      email: this.state.email,\n      password: this.state.password\n    })\n    .then(authenticated => {\n      Router.push(`/auth/callback`)\n    })\n    .catch(() => {\n      alert(\"Authentication failed.\")\n    })\n  }\n  \n  render() {\n    if (this.props.session.user) {\n      return null\n    } else {\n      return (\n        <div className=\"container\">\n          <div className=\"text-center\">\n            <h1 className=\"display-5 mt-4 mb-2\">NextAuth - Custom Sign In</h1>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-sm-12 col-md-10 col-lg-8 col-xl-7 mr-auto ml-auto\">\n              <p className=\"mt-3 mb-4 text-center\">\n                If you want to support password based sign in, two factor authentication \n                or another sign in method, define a signin() function\n                in <strong>next-auth.functions.js</strong>.\n              </p>\n              <div className=\"card mt-3 mb-3\">\n                <h4 className=\"card-header\">Sign In</h4>\n                <div className=\"card-body pb-0\">\n                  <form id=\"signin\" method=\"post\" action=\"/auth/signin\" onSubmit={this.handleSignInSubmit}>\n                    <input name=\"_csrf\" type=\"hidden\" value={this.state.session.csrfToken}/>\n                    <p>\n                      <label htmlFor=\"email\">Email address</label><br/>\n                      <input name=\"email\" type=\"text\" placeholder=\"j.smith@example.com\" id=\"email\" className=\"form-control\" value={this.state.email} onChange={this.handleEmailChange}/>\n                    </p>\n                    <p>\n                      <label htmlFor=\"password\">Password</label><br/>\n                      <input name=\"password\" type=\"password\" placeholder=\"\" id=\"password\" className=\"form-control\" value={this.state.password} onChange={this.handlePasswordChange}/>\n                    </p>\n                    <p className=\"text-right\">\n                      <button id=\"submitButton\" type=\"submit\" className=\"btn btn-outline-primary\">Sign in</button>\n                    </p>\n                  </form>\n                </div>\n              </div>\n              <p className=\"text-italic text-muted text-center small\">\n                For this to work, you will need enable the signin() function in <strong>next-auth.functions.js</strong>\n              </p>\n            </div>\n          </div>\n          <p className=\"text-center\">\n            <Link href=\"/auth\"><a>Back</a></Link>\n          </p>\n        </div>\n      )\n    }\n  }\n}"]},"metadata":{},"sourceType":"module"}