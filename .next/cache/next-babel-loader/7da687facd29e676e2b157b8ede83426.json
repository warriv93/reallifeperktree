{"ast":null,"code":"import _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/madisontaskett/gitRepos/reallifeperktree/pages/auth/index.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Router from 'next/router';\nimport Link from 'next/link';\nimport { NextAuth } from 'next-auth/client';\n\nvar _default =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(_default, _React$Component);\n\n  _createClass(_default, null, [{\n    key: \"getInitialProps\",\n    value: function getInitialProps(_ref) {\n      var req;\n      return _regeneratorRuntime.async(function getInitialProps$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              req = _ref.req;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(NextAuth.init({\n                req: req\n              }));\n\n            case 3:\n              _context.t0 = _context.sent;\n              _context.next = 6;\n              return _regeneratorRuntime.awrap(NextAuth.linked({\n                req: req\n              }));\n\n            case 6:\n              _context.t1 = _context.sent;\n              _context.next = 9;\n              return _regeneratorRuntime.awrap(NextAuth.providers({\n                req: req\n              }));\n\n            case 9:\n              _context.t2 = _context.sent;\n              return _context.abrupt(\"return\", {\n                session: _context.t0,\n                linkedAccounts: _context.t1,\n                providers: _context.t2\n              });\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    }\n  }]);\n\n  function _default(props) {\n    var _this;\n\n    _classCallCheck(this, _default);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(_default).call(this, props));\n    _this.state = {\n      email: '',\n      session: _this.props.session\n    };\n    _this.handleEmailChange = _this.handleEmailChange.bind(_assertThisInitialized(_this));\n    _this.handleSignInSubmit = _this.handleSignInSubmit.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(_default, [{\n    key: \"handleEmailChange\",\n    value: function handleEmailChange(event) {\n      this.setState({\n        email: event.target.value\n      });\n    }\n  }, {\n    key: \"handleSignInSubmit\",\n    value: function handleSignInSubmit(event) {\n      var _this2 = this;\n\n      event.preventDefault();\n      if (!this.state.email) return;\n      NextAuth.signin(this.state.email).then(function () {\n        Router.push(\"/auth/check-email?email=\".concat(_this2.state.email));\n      })[\"catch\"](function () {\n        Router.push(\"/auth/error?action=signin&type=email&email=\".concat(_this2.state.email));\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.props.session.user) {\n        return __jsx(\"div\", {\n          className: \"container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49\n          },\n          __self: this\n        }, __jsx(\"div\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50\n          },\n          __self: this\n        }, __jsx(\"h1\", {\n          className: \"display-4 mt-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51\n          },\n          __self: this\n        }, \"NextAuth Example\"), __jsx(\"p\", {\n          className: \"lead mt-3 mb-1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        }, \"You are signed in as \", __jsx(\"span\", {\n          className: \"font-weight-bold\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        }, this.props.session.user.email), \".\")), __jsx(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }, __jsx(\"div\", {\n          className: \"col-sm-5 mr-auto ml-auto\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        }, __jsx(LinkAccounts, {\n          session: this.props.session,\n          linkedAccounts: this.props.linkedAccounts,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }))), __jsx(\"p\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }, __jsx(Link, {\n          href: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, __jsx(\"a\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, \"Home\"))));\n      } else {\n        return __jsx(\"div\", {\n          className: \"container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }, __jsx(\"div\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }, __jsx(\"h1\", {\n          className: \"display-4 mt-3 mb-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }, \"NextAuth Example\")), __jsx(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, __jsx(\"div\", {\n          className: \"col-sm-6 mr-auto ml-auto\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, __jsx(\"div\", {\n          className: \"card mt-3 mb-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        }, __jsx(\"h4\", {\n          className: \"card-header\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, \"Sign In\"), __jsx(\"div\", {\n          className: \"card-body pb-0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, __jsx(SignInButtons, {\n          providers: this.props.providers,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }), __jsx(\"form\", {\n          id: \"signin\",\n          method: \"post\",\n          action: \"/auth/email/signin\",\n          onSubmit: this.handleSignInSubmit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, __jsx(\"input\", {\n          name: \"_csrf\",\n          type: \"hidden\",\n          value: this.state.session.csrfToken,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }), __jsx(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, __jsx(\"label\", {\n          htmlFor: \"email\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, \"Email address\"), __jsx(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }), __jsx(\"input\", {\n          name: \"email\",\n          type: \"text\",\n          placeholder: \"j.smith@example.com\",\n          id: \"email\",\n          className: \"form-control\",\n          value: this.state.email,\n          onChange: this.handleEmailChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        })), __jsx(\"p\", {\n          className: \"text-right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }, __jsx(\"button\", {\n          id: \"submitButton\",\n          type: \"submit\",\n          className: \"btn btn-outline-primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, \"Sign in with email\"))))))), __jsx(\"p\", {\n          className: \"text-center small\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }, __jsx(Link, {\n          href: \"/auth/credentials\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, __jsx(\"a\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, \"Sign in with credentials\"))), __jsx(\"p\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, __jsx(Link, {\n          href: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, __jsx(\"a\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, \"Home\"))));\n      }\n    }\n  }]);\n\n  return _default;\n}(React.Component);\n\nexport { _default as default };\nexport var LinkAccounts =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inherits(LinkAccounts, _React$Component2);\n\n  function LinkAccounts() {\n    _classCallCheck(this, LinkAccounts);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(LinkAccounts).apply(this, arguments));\n  }\n\n  _createClass(LinkAccounts, [{\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return __jsx(\"div\", {\n        className: \"card mt-3 mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, __jsx(\"h4\", {\n        className: \"card-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"Link Accounts\"), __jsx(\"div\", {\n        className: \"card-body pb-0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, _Object$keys(this.props.linkedAccounts).map(function (provider, i) {\n        return __jsx(LinkAccount, {\n          key: i,\n          provider: provider,\n          session: _this3.props.session,\n          linked: _this3.props.linkedAccounts[provider],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        });\n      })));\n    }\n  }]);\n\n  return LinkAccounts;\n}(React.Component);\nexport var LinkAccount =\n/*#__PURE__*/\nfunction (_React$Component3) {\n  _inherits(LinkAccount, _React$Component3);\n\n  function LinkAccount() {\n    _classCallCheck(this, LinkAccount);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(LinkAccount).apply(this, arguments));\n  }\n\n  _createClass(LinkAccount, [{\n    key: \"render\",\n    value: function render() {\n      if (this.props.linked === true) {\n        return __jsx(\"form\", {\n          method: \"post\",\n          action: \"/auth/oauth/\".concat(this.props.provider.toLowerCase(), \"/unlink\"),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, __jsx(\"input\", {\n          name: \"_csrf\",\n          type: \"hidden\",\n          value: this.props.session.csrfToken,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }), __jsx(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }, __jsx(\"button\", {\n          className: \"btn btn-block btn-outline-danger\",\n          type: \"submit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }, \"Unlink from \", this.props.provider)));\n      } else {\n        return __jsx(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, __jsx(\"a\", {\n          className: \"btn btn-block btn-outline-primary\",\n          href: \"/auth/oauth/\".concat(this.props.provider.toLowerCase()),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, \"Link with \", this.props.provider));\n      }\n    }\n  }]);\n\n  return LinkAccount;\n}(React.Component);\nexport var SignInButtons =\n/*#__PURE__*/\nfunction (_React$Component4) {\n  _inherits(SignInButtons, _React$Component4);\n\n  function SignInButtons() {\n    _classCallCheck(this, SignInButtons);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SignInButtons).apply(this, arguments));\n  }\n\n  _createClass(SignInButtons, [{\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return __jsx(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, _Object$keys(this.props.providers).map(function (provider, i) {\n        return __jsx(\"p\", {\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154\n          },\n          __self: this\n        }, __jsx(\"a\", {\n          className: \"btn btn-block btn-outline-secondary\",\n          href: _this4.props.providers[provider].signin,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155\n          },\n          __self: this\n        }, \"Sign in with \", provider));\n      }));\n    }\n  }]);\n\n  return SignInButtons;\n}(React.Component);","map":{"version":3,"sources":["/Users/madisontaskett/gitRepos/reallifeperktree/pages/auth/index.js"],"names":["React","Router","Link","NextAuth","req","init","linked","providers","session","linkedAccounts","props","state","email","handleEmailChange","bind","handleSignInSubmit","event","setState","target","value","preventDefault","signin","then","push","user","csrfToken","Component","LinkAccounts","map","provider","i","LinkAccount","toLowerCase","SignInButtons"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Router from 'next/router'\nimport Link from 'next/link'\nimport { NextAuth } from 'next-auth/client'\n\nexport default class extends React.Component {\n  \n  static async getInitialProps({req}) {\n    return {\n      session: await NextAuth.init({req}),\n      linkedAccounts: await NextAuth.linked({req}),\n      providers: await NextAuth.providers({req})\n    }\n  }\n  \n  constructor(props) {\n    super(props)\n    this.state = {\n      email: '',\n      session: this.props.session\n    }\n    this.handleEmailChange = this.handleEmailChange.bind(this)  \n    this.handleSignInSubmit = this.handleSignInSubmit.bind(this)\n  }\n    \n  handleEmailChange(event) {\n    this.setState({\n      email: event.target.value\n    })\n  }\n  \n  handleSignInSubmit(event) {\n    event.preventDefault()\n    \n    if (!this.state.email) return\n\n    NextAuth.signin(this.state.email)\n    .then(() => {\n      Router.push(`/auth/check-email?email=${this.state.email}`)\n    })\n    .catch(() => {\n      Router.push(`/auth/error?action=signin&type=email&email=${this.state.email}`)\n    })\n  }\n  \n  render() {\n    if (this.props.session.user) {\n      return (\n        <div className=\"container\">\n          <div className=\"text-center\">\n            <h1 className=\"display-4 mt-3\">NextAuth Example</h1>\n            <p className=\"lead mt-3 mb-1\">You are signed in as <span className=\"font-weight-bold\">{this.props.session.user.email}</span>.</p>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-sm-5 mr-auto ml-auto\">\n              <LinkAccounts\n                session={this.props.session}\n                linkedAccounts={this.props.linkedAccounts}\n                />\n            </div>\n          </div>\n          <p className=\"text-center\">\n            <Link href=\"/\"><a>Home</a></Link>\n          </p>\n        </div>\n      )\n    } else {\n      return (\n        <div className=\"container\">\n          <div className=\"text-center\">\n            <h1 className=\"display-4 mt-3 mb-3\">NextAuth Example</h1>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-sm-6 mr-auto ml-auto\">\n              <div className=\"card mt-3 mb-3\">\n                <h4 className=\"card-header\">Sign In</h4>\n                <div className=\"card-body pb-0\">\n                  <SignInButtons providers={this.props.providers}/>\n                  <form id=\"signin\" method=\"post\" action=\"/auth/email/signin\" onSubmit={this.handleSignInSubmit}>\n                    <input name=\"_csrf\" type=\"hidden\" value={this.state.session.csrfToken}/>\n                    <p>\n                      <label htmlFor=\"email\">Email address</label><br/>\n                      <input name=\"email\" type=\"text\" placeholder=\"j.smith@example.com\" id=\"email\" className=\"form-control\" value={this.state.email} onChange={this.handleEmailChange}/>\n                    </p>\n                    <p className=\"text-right\">\n                      <button id=\"submitButton\" type=\"submit\" className=\"btn btn-outline-primary\">Sign in with email</button>\n                    </p>\n                  </form>\n                </div>\n              </div>\n            </div>\n          </div>\n          <p className=\"text-center small\">\n            <Link href=\"/auth/credentials\"><a>Sign in with credentials</a></Link>\n          </p>\n          <p className=\"text-center\">\n            <Link href=\"/\"><a>Home</a></Link>\n          </p>\n        </div>\n      )\n    }\n  }\n}\n\nexport class LinkAccounts extends React.Component {\n  render() {\n    return (\n      <div className=\"card mt-3 mb-3\">\n        <h4 className=\"card-header\">Link Accounts</h4>\n        <div className=\"card-body pb-0\">\n          {\n            Object.keys(this.props.linkedAccounts).map((provider, i) => {\n              return <LinkAccount key={i} provider={provider} session={this.props.session} linked={this.props.linkedAccounts[provider]}/>\n            })\n          }\n        </div>\n      </div>\n    )\n  }\n}\n\nexport class LinkAccount extends React.Component {\n  render() {\n    if (this.props.linked === true) {\n      return (\n        <form method=\"post\" action={`/auth/oauth/${this.props.provider.toLowerCase()}/unlink`}>\n          <input name=\"_csrf\" type=\"hidden\" value={this.props.session.csrfToken}/>\n          <p>\n            <button className=\"btn btn-block btn-outline-danger\" type=\"submit\">\n              Unlink from {this.props.provider}\n            </button>\n          </p>\n        </form>\n      )\n    } else {\n      return (\n        <p>\n          <a className=\"btn btn-block btn-outline-primary\" href={`/auth/oauth/${this.props.provider.toLowerCase()}`}>\n            Link with {this.props.provider}\n          </a>\n        </p>\n      )\n    }\n  }\n}\n\nexport class SignInButtons extends React.Component {\n  render() {\n    return (\n      <React.Fragment>\n        {\n          Object.keys(this.props.providers).map((provider, i) => {\n            return (\n              <p key={i}>\n                <a className=\"btn btn-block btn-outline-secondary\" href={this.props.providers[provider].signin}>\n                  Sign in with {provider}\n                </a>\n              </p>\n              )              \n          })\n        }\n      </React.Fragment>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}