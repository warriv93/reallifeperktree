{"ast":null,"code":"import _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nvar _jsxFileName = \"/Users/madisontaskett/gitRepos/reallifeperktree/pages/auth/index.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Router from 'next/router';\nimport Link from 'next/link';\nimport { NextAuth } from 'next-auth/client';\nexport default class extends React.Component {\n  static async getInitialProps({\n    req\n  }) {\n    return {\n      session: await NextAuth.init({\n        req\n      }),\n      linkedAccounts: await NextAuth.linked({\n        req\n      }),\n      providers: await NextAuth.providers({\n        req\n      })\n    };\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: '',\n      session: this.props.session\n    };\n    this.handleEmailChange = this.handleEmailChange.bind(this);\n    this.handleSignInSubmit = this.handleSignInSubmit.bind(this);\n  }\n\n  handleEmailChange(event) {\n    this.setState({\n      email: event.target.value\n    });\n  }\n\n  handleSignInSubmit(event) {\n    event.preventDefault();\n    if (!this.state.email) return;\n    NextAuth.signin(this.state.email).then(() => {\n      Router.push(`/auth/check-email?email=${this.state.email}`);\n    }).catch(() => {\n      Router.push(`/auth/error?action=signin&type=email&email=${this.state.email}`);\n    });\n  }\n\n  render() {\n    if (this.props.session.user) {\n      return __jsx(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, __jsx(\"h1\", {\n        className: \"display-4 mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, \"NextAuth Example\"), __jsx(\"p\", {\n        className: \"lead mt-3 mb-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, \"You are signed in as \", __jsx(\"span\", {\n        className: \"font-weight-bold\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, this.props.session.user.email), \".\")), __jsx(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"col-sm-5 mr-auto ml-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, __jsx(LinkAccounts, {\n        session: this.props.session,\n        linkedAccounts: this.props.linkedAccounts,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }))), __jsx(\"p\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, __jsx(Link, {\n        href: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, \"Home\"))));\n    } else {\n      return __jsx(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, __jsx(\"h1\", {\n        className: \"display-4 mt-3 mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"NextAuth Example\")), __jsx(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"col-sm-6 mr-auto ml-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"card mt-3 mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, __jsx(\"h4\", {\n        className: \"card-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"Sign In\"), __jsx(\"div\", {\n        className: \"card-body pb-0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, __jsx(SignInButtons, {\n        providers: this.props.providers,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }), __jsx(\"form\", {\n        id: \"signin\",\n        method: \"post\",\n        action: \"/auth/email/signin\",\n        onSubmit: this.handleSignInSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, __jsx(\"input\", {\n        name: \"_csrf\",\n        type: \"hidden\",\n        value: this.state.session.csrfToken,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }), __jsx(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, __jsx(\"label\", {\n        htmlFor: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"Email address\"), __jsx(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }), __jsx(\"input\", {\n        name: \"email\",\n        type: \"text\",\n        placeholder: \"j.smith@example.com\",\n        id: \"email\",\n        className: \"form-control\",\n        value: this.state.email,\n        onChange: this.handleEmailChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      })), __jsx(\"p\", {\n        className: \"text-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, __jsx(\"button\", {\n        id: \"submitButton\",\n        type: \"submit\",\n        className: \"btn btn-outline-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"Sign in with email\"))))))), __jsx(\"p\", {\n        className: \"text-center small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, __jsx(Link, {\n        href: \"/auth/credentials\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, \"Sign in with credentials\"))), __jsx(\"p\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, __jsx(Link, {\n        href: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, \"Home\"))));\n    }\n  }\n\n}\nexport class LinkAccounts extends React.Component {\n  render() {\n    return __jsx(\"div\", {\n      className: \"card mt-3 mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, __jsx(\"h4\", {\n      className: \"card-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"Link Accounts\"), __jsx(\"div\", {\n      className: \"card-body pb-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, _Object$keys(this.props.linkedAccounts).map((provider, i) => {\n      return __jsx(LinkAccount, {\n        key: i,\n        provider: provider,\n        session: this.props.session,\n        linked: this.props.linkedAccounts[provider],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      });\n    })));\n  }\n\n}\nexport class LinkAccount extends React.Component {\n  render() {\n    if (this.props.linked === true) {\n      return __jsx(\"form\", {\n        method: \"post\",\n        action: `/auth/oauth/${this.props.provider.toLowerCase()}/unlink`,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, __jsx(\"input\", {\n        name: \"_csrf\",\n        type: \"hidden\",\n        value: this.props.session.csrfToken,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }), __jsx(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, __jsx(\"button\", {\n        className: \"btn btn-block btn-outline-danger\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Unlink from \", this.props.provider)));\n    } else {\n      return __jsx(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        className: \"btn btn-block btn-outline-primary\",\n        href: `/auth/oauth/${this.props.provider.toLowerCase()}`,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, \"Link with \", this.props.provider));\n    }\n  }\n\n}\nexport class SignInButtons extends React.Component {\n  render() {\n    return __jsx(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, _Object$keys(this.props.providers).map((provider, i) => {\n      return __jsx(\"p\", {\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        className: \"btn btn-block btn-outline-secondary\",\n        href: this.props.providers[provider].signin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, \"Sign in with \", provider));\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/madisontaskett/gitRepos/reallifeperktree/pages/auth/index.js"],"names":["React","Router","Link","NextAuth","Component","getInitialProps","req","session","init","linkedAccounts","linked","providers","constructor","props","state","email","handleEmailChange","bind","handleSignInSubmit","event","setState","target","value","preventDefault","signin","then","push","catch","render","user","csrfToken","LinkAccounts","map","provider","i","LinkAccount","toLowerCase","SignInButtons"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Router from 'next/router'\nimport Link from 'next/link'\nimport { NextAuth } from 'next-auth/client'\n\nexport default class extends React.Component {\n  \n  static async getInitialProps({req}) {\n    return {\n      session: await NextAuth.init({req}),\n      linkedAccounts: await NextAuth.linked({req}),\n      providers: await NextAuth.providers({req})\n    }\n  }\n  \n  constructor(props) {\n    super(props)\n    this.state = {\n      email: '',\n      session: this.props.session\n    }\n    this.handleEmailChange = this.handleEmailChange.bind(this)  \n    this.handleSignInSubmit = this.handleSignInSubmit.bind(this)\n  }\n    \n  handleEmailChange(event) {\n    this.setState({\n      email: event.target.value\n    })\n  }\n  \n  handleSignInSubmit(event) {\n    event.preventDefault()\n    \n    if (!this.state.email) return\n\n    NextAuth.signin(this.state.email)\n    .then(() => {\n      Router.push(`/auth/check-email?email=${this.state.email}`)\n    })\n    .catch(() => {\n      Router.push(`/auth/error?action=signin&type=email&email=${this.state.email}`)\n    })\n  }\n  \n  render() {\n    if (this.props.session.user) {\n      return (\n        <div className=\"container\">\n          <div className=\"text-center\">\n            <h1 className=\"display-4 mt-3\">NextAuth Example</h1>\n            <p className=\"lead mt-3 mb-1\">You are signed in as <span className=\"font-weight-bold\">{this.props.session.user.email}</span>.</p>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-sm-5 mr-auto ml-auto\">\n              <LinkAccounts\n                session={this.props.session}\n                linkedAccounts={this.props.linkedAccounts}\n                />\n            </div>\n          </div>\n          <p className=\"text-center\">\n            <Link href=\"/\"><a>Home</a></Link>\n          </p>\n        </div>\n      )\n    } else {\n      return (\n        <div className=\"container\">\n          <div className=\"text-center\">\n            <h1 className=\"display-4 mt-3 mb-3\">NextAuth Example</h1>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-sm-6 mr-auto ml-auto\">\n              <div className=\"card mt-3 mb-3\">\n                <h4 className=\"card-header\">Sign In</h4>\n                <div className=\"card-body pb-0\">\n                  <SignInButtons providers={this.props.providers}/>\n                  <form id=\"signin\" method=\"post\" action=\"/auth/email/signin\" onSubmit={this.handleSignInSubmit}>\n                    <input name=\"_csrf\" type=\"hidden\" value={this.state.session.csrfToken}/>\n                    <p>\n                      <label htmlFor=\"email\">Email address</label><br/>\n                      <input name=\"email\" type=\"text\" placeholder=\"j.smith@example.com\" id=\"email\" className=\"form-control\" value={this.state.email} onChange={this.handleEmailChange}/>\n                    </p>\n                    <p className=\"text-right\">\n                      <button id=\"submitButton\" type=\"submit\" className=\"btn btn-outline-primary\">Sign in with email</button>\n                    </p>\n                  </form>\n                </div>\n              </div>\n            </div>\n          </div>\n          <p className=\"text-center small\">\n            <Link href=\"/auth/credentials\"><a>Sign in with credentials</a></Link>\n          </p>\n          <p className=\"text-center\">\n            <Link href=\"/\"><a>Home</a></Link>\n          </p>\n        </div>\n      )\n    }\n  }\n}\n\nexport class LinkAccounts extends React.Component {\n  render() {\n    return (\n      <div className=\"card mt-3 mb-3\">\n        <h4 className=\"card-header\">Link Accounts</h4>\n        <div className=\"card-body pb-0\">\n          {\n            Object.keys(this.props.linkedAccounts).map((provider, i) => {\n              return <LinkAccount key={i} provider={provider} session={this.props.session} linked={this.props.linkedAccounts[provider]}/>\n            })\n          }\n        </div>\n      </div>\n    )\n  }\n}\n\nexport class LinkAccount extends React.Component {\n  render() {\n    if (this.props.linked === true) {\n      return (\n        <form method=\"post\" action={`/auth/oauth/${this.props.provider.toLowerCase()}/unlink`}>\n          <input name=\"_csrf\" type=\"hidden\" value={this.props.session.csrfToken}/>\n          <p>\n            <button className=\"btn btn-block btn-outline-danger\" type=\"submit\">\n              Unlink from {this.props.provider}\n            </button>\n          </p>\n        </form>\n      )\n    } else {\n      return (\n        <p>\n          <a className=\"btn btn-block btn-outline-primary\" href={`/auth/oauth/${this.props.provider.toLowerCase()}`}>\n            Link with {this.props.provider}\n          </a>\n        </p>\n      )\n    }\n  }\n}\n\nexport class SignInButtons extends React.Component {\n  render() {\n    return (\n      <React.Fragment>\n        {\n          Object.keys(this.props.providers).map((provider, i) => {\n            return (\n              <p key={i}>\n                <a className=\"btn btn-block btn-outline-secondary\" href={this.props.providers[provider].signin}>\n                  Sign in with {provider}\n                </a>\n              </p>\n              )              \n          })\n        }\n      </React.Fragment>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}